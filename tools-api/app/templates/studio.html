<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tools API Studio</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="/static/css/studio.css" />
</head>
<body>
    <div class="app-shell">
        <aside class="sidebar">
            <div class="sidebar__brand">
                <span class="sidebar__logo">üõ†Ô∏è</span>
                <div>
                    <h1>Tools API Studio</h1>
                    <p class="sidebar__subtitle">Launch document & media workflows visually.</p>
                </div>
            </div>
            <nav class="sidebar__nav">
                <button class="nav-link active" data-section="overview">Overview</button>
                <button class="nav-link" data-section="parser-tools">Parser</button>
                <button class="nav-link" data-section="docx-tools">DOCX</button>
                <button class="nav-link" data-section="image-tools">Image</button>
                <button class="nav-link" data-section="js-tools">JS Tools</button>
                <button class="nav-link" data-section="media-tools">Media</button>
            </nav>
            <div class="sidebar__footer">
                <a class="primary-btn" href="{{ docs_url }}" target="_blank" rel="noreferrer">Open API Docs</a>
                <p class="sidebar__hint">Swagger docs stay available at <code>{{ docs_url }}</code>.</p>
            </div>
        </aside>
        <main class="content">
            <section id="overview" class="panel">
                <header class="panel__header">
                    <h2>Welcome to your automation studio</h2>
                    <p>Trigger conversions, inspect jobs, and download assets without writing cURL commands.</p>
                </header>
                <div class="panel__body">
                    <div class="pill-group">
                        <span class="pill">FastAPI {{ version }}</span>
                        <span class="pill">Async ready</span>
                        <span class="pill">Queue aware</span>
                    </div>
                    <div class="grid two-column">
                        <div class="card">
                            <h3>Quick Start</h3>
                            <ol>
                                <li>Choose a tool from the sidebar.</li>
                                <li>Provide content or upload files.</li>
                                <li>Launch the request and download results instantly.</li>
                            </ol>
                            <p class="muted">Need deeper integration? Wire these endpoints straight into n8n, Zapier, or your agent stack.</p>
                        </div>
                        <div class="card">
                            <h3>Live Endpoint Catalogue</h3>
                            <div class="endpoint-search">
                                <label for="endpoint-filter">Search</label>
                                <input id="endpoint-filter" type="search" placeholder="Filter by name or tag" />
                            </div>
                            <div id="endpoint-list" class="endpoint-list" aria-live="polite">
                                <div class="muted">Loading endpoint catalogue‚Ä¶</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="parser-tools" class="panel">
                <header class="panel__header">
                    <h2>Parser</h2>
                    <p>Convert HTML or Markdown into structured Google Docs batchUpdate operations.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card">
                        <form id="html-parse-form" class="tool-form">
                            <div class="form-header">
                                <h3>HTML ‚Üí Requests</h3>
                                <p class="muted">Paste marketing-ready HTML and receive the corresponding Google Docs operations.</p>
                            </div>
                            <label for="html-input">HTML</label>
                            <textarea id="html-input" name="html" rows="8" placeholder="&lt;section&gt;...&lt;/section&gt;" required></textarea>
                            <button type="submit" class="primary-btn">Parse HTML</button>
                        </form>
                    </div>
                    <div class="card">
                        <form id="markdown-parse-form" class="tool-form">
                            <div class="form-header">
                                <h3>Markdown ‚Üí Requests</h3>
                                <p class="muted">Bring GitHub-flavoured Markdown and convert it to Docs-ready mutations.</p>
                            </div>
                            <label for="markdown-input">Markdown</label>
                            <textarea id="markdown-input" name="markdown" rows="8" placeholder="# Release notes" required></textarea>
                            <button type="submit" class="primary-btn">Parse Markdown</button>
                        </form>
                    </div>
                    <div class="card span-two">
                        <form id="docs-html-form" class="tool-form">
                            <div class="form-header">
                                <h3>Instant Docs Request Builder</h3>
                                <p class="muted">Generate Google Docs batchUpdate payloads from HTML without queueing a job.</p>
                            </div>
                            <label for="docs-html-input">HTML</label>
                            <textarea id="docs-html-input" name="html" rows="6" placeholder="&lt;h1&gt;Launch Deck&lt;/h1&gt;" required></textarea>
                            <button type="submit" class="primary-btn">Build Docs Requests</button>
                        </form>
                    </div>
                    <div class="card span-two">
                        <form id="docs-markdown-form" class="tool-form">
                            <div class="form-header">
                                <h3>Markdown Docs Builder</h3>
                                <p class="muted">Skip the queue and transform Markdown to Docs mutations immediately.</p>
                            </div>
                            <label for="docs-markdown-input">Markdown</label>
                            <textarea id="docs-markdown-input" name="markdown" rows="6" placeholder="## Agenda" required></textarea>
                            <button type="submit" class="primary-btn">Build Docs Requests</button>
                        </form>
                    </div>
                    <div id="parser-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>

            <section id="docx-tools" class="panel">
                <header class="panel__header">
                    <h2>DOCX Toolkit</h2>
                    <p>Upload Word documents and extract plain text instantly.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card">
                        <form id="docx-parse-form" class="tool-form">
                            <div class="form-header">
                                <h3>Parse DOCX</h3>
                                <p class="muted">Drop a .docx file to stream back the cleaned text.</p>
                            </div>
                            <label for="docx-file">DOCX file</label>
                            <input id="docx-file" type="file" accept=".docx" required />
                            <button type="submit" class="primary-btn">Extract Text</button>
                        </form>
                    </div>
                    <div id="docx-results" class="result-panel" aria-live="polite"></div>
                </div>
            </section>

            <section id="image-tools" class="panel">
                <header class="panel__header">
                    <h2>Image Studio</h2>
                    <p>Apply glow effects or create before/after promos without leaving the browser.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card">
                        <form id="halations-form" class="tool-form">
                            <div class="form-header">
                                <h3>Halations Glow</h3>
                                <p class="muted">Upload an image and tune the glow with live sliders.</p>
                            </div>
                            <label for="halations-image">Image</label>
                            <input id="halations-image" type="file" accept="image/*" required />
                            <div class="slider-group">
                                <label>Blur amount <span id="blur-value">10</span></label>
                                <input id="blur-slider" type="range" min="0" max="50" step="1" value="10" />
                            </div>
                            <div class="slider-group">
                                <label>Brightness threshold <span id="brightness-value">200</span></label>
                                <input id="brightness-slider" type="range" min="0" max="255" step="5" value="200" />
                            </div>
                            <div class="slider-group">
                                <label>Strength <span id="strength-value">50</span></label>
                                <input id="strength-slider" type="range" min="0" max="150" step="1" value="50" />
                            </div>
                            <button type="submit" class="primary-btn">Apply Glow</button>
                        </form>
                    </div>
                    <div class="card">
                        <form id="before-after-form" class="tool-form">
                            <div class="form-header">
                                <h3>Before/After Swipe</h3>
                                <p class="muted">Blend two visuals into a motion clip with optional captions.</p>
                            </div>
                            <label for="before-image">Before image</label>
                            <input id="before-image" type="file" accept="image/*" required />
                            <label for="after-image">After image</label>
                            <input id="after-image" type="file" accept="image/*" required />
                            <div class="form-row">
                                <label for="before-after-duration">Duration (seconds)</label>
                                <input id="before-after-duration" type="number" min="1" max="20" step="0.5" value="6" />
                                <label for="before-after-fps">FPS</label>
                                <input id="before-after-fps" type="number" min="1" max="60" step="1" value="30" />
                            </div>
                            <div class="form-row">
                                <label for="before-after-cycles">Cycles</label>
                                <input id="before-after-cycles" type="number" min="1" max="10" step="1" value="2" />
                                <label for="before-after-line">Line thickness</label>
                                <input id="before-after-line" type="number" min="1" max="20" step="1" value="6" />
                            </div>
                            <label class="checkbox">
                                <input id="before-after-text-toggle" type="checkbox" />
                                <span>Add overlay text</span>
                            </label>
                            <textarea id="before-after-text" rows="2" placeholder="Save 35% this quarter" style="display: none;"></textarea>
                            <button type="submit" class="primary-btn">Generate Clip</button>
                        </form>
                    </div>
                    <div id="image-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>

            <section id="js-tools" class="panel">
                <header class="panel__header">
                    <h2>JavaScript Tools</h2>
                    <p>Bridge Node-powered utilities like the panorama splitter straight from the browser.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card span-two">
                        <form id="panosplitter-form" class="tool-form">
                            <div class="form-header">
                                <h3>Panosplitter</h3>
                                <p class="muted">Upload a panorama and get Instagram-ready slices plus a downloadable zip.</p>
                            </div>
                            <label for="panosplitter-image">Panorama image</label>
                            <input id="panosplitter-image" type="file" accept="image/*" required />
                            <label class="checkbox">
                                <input id="panosplitter-highres" type="checkbox" />
                                <span>Enable high resolution mode</span>
                            </label>
                            <button type="submit" class="primary-btn">Split Panorama</button>
                        </form>
                    </div>
                    <div class="card span-two">
                        <form id="cobalt-form" class="tool-form">
                            <div class="form-header">
                                <h3>Cobalt Downloader</h3>
                                <p class="muted">Proxy downloads through your configured Cobalt instance without leaving the browser.</p>
                            </div>
                            <label for="cobalt-url">URL</label>
                            <input id="cobalt-url" type="url" required placeholder="https://www.youtube.com/watch?v=..." />
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-service">Service override (optional)</label>
                                    <select id="cobalt-service">
                                        <option value="">Auto detect</option>
                                        <option value="youtube">YouTube</option>
                                        <option value="tiktok">TikTok</option>
                                        <option value="instagram">Instagram</option>
                                        <option value="twitter">Twitter / X</option>
                                        <option value="soundcloud">SoundCloud</option>
                                        <option value="facebook">Facebook</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="cobalt-preset">Quick preset</label>
                                    <select id="cobalt-preset">
                                        <option value="custom" data-reset="false" data-options="{}" data-description="Start with a blank payload and build your own combination of options.">Custom (manual)</option>
                                        <option value="audio-mp3" data-options='{"downloadMode":"audio","audioFormat":"mp3","audioBitrate":"320","response_format":"binary"}' data-description="Audio-only MP3 download at 320 kbps. Binary responses are enabled so you can save directly.">High bitrate MP3</option>
                                        <option value="audio-ogg" data-options='{"downloadMode":"audio","audioFormat":"ogg","audioBitrate":"96","response_format":"binary"}' data-description="Lightweight OGG/Vorbis audio tuned for spoken-word content and lower bandwidth." data-reset="true">Compact podcast OGG</option>
                                        <option value="video-1080" data-options='{"videoQuality":"1080","youtubeVideoCodec":"h264","youtubeVideoContainer":"mp4","response_format":"binary"}' data-description="1080p MP4 download using the H.264 codec for broad compatibility." data-reset="true">1080p MP4 (H.264)</option>
                                        <option value="video-4k" data-options='{"videoQuality":"2160","youtubeVideoCodec":"av1","youtubeVideoContainer":"webm","response_format":"binary","alwaysProxy":true}' data-description="Force 4K WebM output via AV1 with proxying enabled for the largest files." data-reset="true">4K WebM (AV1)</option>
                                    </select>
                                </div>
                            </div>
                            <p id="cobalt-preset-description" class="muted" hidden></p>
                            <div class="form-row">
                                <label class="checkbox">
                                    <input id="cobalt-binary" type="checkbox" />
                                    <span>Return binary download</span>
                                </label>
                                <label class="checkbox">
                                    <input id="cobalt-always-proxy" type="checkbox" />
                                    <span>Always proxy downloads</span>
                                </label>
                                <label class="checkbox">
                                    <input id="cobalt-disable-metadata" type="checkbox" />
                                    <span>Strip metadata from files</span>
                                </label>
                            </div>
                            <label for="cobalt-filename">Filename override (binary only)</label>
                            <input id="cobalt-filename" type="text" placeholder="custom.mp4" />
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-download-mode">Download mode</label>
                                    <select id="cobalt-download-mode">
                                        <option value="">Use instance default</option>
                                        <option value="auto">Auto (audio + video)</option>
                                        <option value="audio">Audio only</option>
                                        <option value="mute">Mute video</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="cobalt-filename-style">Filename style</label>
                                    <select id="cobalt-filename-style">
                                        <option value="">Use instance default</option>
                                        <option value="classic">Classic</option>
                                        <option value="pretty">Pretty</option>
                                        <option value="basic">Basic</option>
                                        <option value="nerdy">Nerdy</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-audio-format">Audio format</label>
                                    <select id="cobalt-audio-format">
                                        <option value="">Use instance default</option>
                                        <option value="best">Best available</option>
                                        <option value="mp3">MP3</option>
                                        <option value="ogg">OGG / Vorbis</option>
                                        <option value="wav">WAV</option>
                                        <option value="opus">Opus</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="cobalt-audio-bitrate">Audio bitrate (kbps)</label>
                                    <select id="cobalt-audio-bitrate">
                                        <option value="">Use instance default</option>
                                        <option value="320">320</option>
                                        <option value="256">256</option>
                                        <option value="192">192</option>
                                        <option value="128">128</option>
                                        <option value="96">96</option>
                                        <option value="64">64</option>
                                        <option value="8">8</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-video-quality">Video quality</label>
                                    <select id="cobalt-video-quality">
                                        <option value="">Use instance default</option>
                                        <option value="max">Maximum available</option>
                                        <option value="4320">4320p</option>
                                        <option value="2160">2160p (4K)</option>
                                        <option value="1440">1440p</option>
                                        <option value="1080">1080p</option>
                                        <option value="720">720p</option>
                                        <option value="480">480p</option>
                                        <option value="360">360p</option>
                                        <option value="240">240p</option>
                                        <option value="144">144p</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="cobalt-youtube-video-codec">YouTube video codec</label>
                                    <select id="cobalt-youtube-video-codec">
                                        <option value="">Use instance default</option>
                                        <option value="h264">H.264</option>
                                        <option value="av1">AV1</option>
                                        <option value="vp9">VP9</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-youtube-video-container">YouTube container</label>
                                    <select id="cobalt-youtube-video-container">
                                        <option value="">Use instance default</option>
                                        <option value="auto">Auto</option>
                                        <option value="mp4">MP4</option>
                                        <option value="webm">WebM</option>
                                        <option value="mkv">MKV</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="cobalt-local-processing">Local processing preference</label>
                                    <select id="cobalt-local-processing">
                                        <option value="">Use instance default</option>
                                        <option value="disabled">Disabled</option>
                                        <option value="preferred">Preferred</option>
                                        <option value="forced">Forced</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-subtitle-lang">Subtitle language</label>
                                    <input id="cobalt-subtitle-lang" type="text" placeholder="en" />
                                </div>
                                <div>
                                    <label for="cobalt-youtube-dub-lang">YouTube dub language</label>
                                    <input id="cobalt-youtube-dub-lang" type="text" placeholder="es" />
                                </div>
                            </div>
                            <div class="form-row">
                                <div>
                                    <label for="cobalt-convert-gif">Twitter GIF handling</label>
                                    <select id="cobalt-convert-gif">
                                        <option value="">Use instance default</option>
                                        <option value="true">Convert to GIF</option>
                                        <option value="false">Keep as video</option>
                                    </select>
                                </div>
                                <div class="checkbox-group">
                                    <label class="checkbox">
                                        <input id="cobalt-allow-h265" type="checkbox" />
                                        <span>Allow H265 / HEVC (TikTok)</span>
                                    </label>
                                    <label class="checkbox">
                                        <input id="cobalt-tiktok-full-audio" type="checkbox" />
                                        <span>Fetch TikTok original audio</span>
                                    </label>
                                </div>
                            </div>
                            <div class="form-row">
                                <label class="checkbox">
                                    <input id="cobalt-youtube-better-audio" type="checkbox" />
                                    <span>Prefer higher quality YouTube audio</span>
                                </label>
                                <label class="checkbox">
                                    <input id="cobalt-youtube-hls" type="checkbox" />
                                    <span>Use YouTube HLS formats</span>
                                </label>
                            </div>
                            <p class="muted">Need something custom? Add extra key/value pairs or paste raw JSON below. Later values override earlier selections.</p>
                            <div id="cobalt-custom-options" class="cobalt-options"></div>
                            <button type="button" id="cobalt-add-option" class="text-btn">Add custom option</button>
                            <template id="cobalt-option-template">
                                <div class="form-row cobalt-option-row">
                                    <input type="text" data-option-key aria-label="Option key" placeholder="option name" />
                                    <select data-option-type aria-label="Value type">
                                        <option value="string">Text</option>
                                        <option value="number">Number</option>
                                        <option value="boolean">Boolean</option>
                                        <option value="json">JSON</option>
                                    </select>
                                    <input type="text" data-option-value aria-label="Option value" placeholder="value" />
                                    <button type="button" class="text-btn" data-option-remove aria-label="Remove option">Remove</button>
                                </div>
                            </template>
                            <label for="cobalt-payload">Advanced JSON payload (optional)</label>
                            <textarea id="cobalt-payload" rows="5" placeholder='{"youtubeHLS": true, "subtitleLang": "en"}'></textarea>
                            <button type="submit" class="primary-btn">Send to Cobalt</button>
                        </form>
                    </div>
                    <div id="js-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>

            <section id="media-tools" class="panel">
                <header class="panel__header">
                    <h2>Media Toolkit</h2>
                    <p>Inspect or download media via yt-dlp without touching the command line.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card span-two">
                        <form id="yt-dlp-form" class="tool-form">
                            <div class="form-header">
                                <h3>yt-dlp Inspector</h3>
                                <p class="muted">Fetch metadata or trigger a download with safe defaults.</p>
                            </div>
                            <label for="yt-dlp-url">URL</label>
                            <input id="yt-dlp-url" type="url" required placeholder="https://www.youtube.com/watch?v=..." />
                            <label for="yt-dlp-format">Format selector (optional)</label>
                            <input id="yt-dlp-format" type="text" placeholder="bestvideo+bestaudio/best" />
                            <label for="yt-dlp-playlist-items">Playlist items (e.g. 1-3,5)</label>
                            <input id="yt-dlp-playlist-items" type="text" placeholder="1-3,5" />
                            <label class="checkbox">
                                <input id="yt-dlp-binary" type="checkbox" />
                                <span>Return binary download</span>
                            </label>
                            <label for="yt-dlp-filename">Filename override (binary only)</label>
                            <input id="yt-dlp-filename" type="text" placeholder="custom.mp4" />
                            <label for="yt-dlp-headers">HTTP headers (JSON object)</label>
                            <textarea id="yt-dlp-headers" rows="3" placeholder='{"Cookie": "session=..."}'></textarea>
                            <label for="yt-dlp-proxy">Proxy URL</label>
                            <input id="yt-dlp-proxy" type="text" placeholder="socks5://localhost:9050" />
                            <div class="form-row">
                                <label class="checkbox">
                                    <input id="yt-dlp-write-subtitles" type="checkbox" />
                                    <span>Write subtitles</span>
                                </label>
                                <label class="checkbox">
                                    <input id="yt-dlp-write-auto-sub" type="checkbox" />
                                    <span>Write automatic subs</span>
                                </label>
                            </div>
                            <label for="yt-dlp-subtitle-langs">Subtitle languages (comma separated)</label>
                            <input id="yt-dlp-subtitle-langs" type="text" placeholder="en,es" />
                            <button type="submit" class="primary-btn">Run yt-dlp</button>
                        </form>
                    </div>
                    <div id="media-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>
        </main>
    </div>
    <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>
    <script>
        window.__STUDIO_CONFIG__ = {
            openapiUrl: "{{ openapi_url }}"
        };
    </script>
    <script src="/static/js/studio.js" type="module"></script>
</body>
</html>
