<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tools API Studio</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="/static/css/studio.css" />
</head>
<body>
    <div class="app-shell">
        <aside class="sidebar">
            <div class="sidebar__brand">
                <span class="sidebar__logo">üõ†Ô∏è</span>
                <div>
                    <h1>Tools API Studio</h1>
                    <p class="sidebar__subtitle">Launch document & media workflows visually.</p>
                </div>
            </div>
            <nav class="sidebar__nav">
                <button class="nav-link active" data-section="overview">Overview</button>
                <button class="nav-link" data-section="parser-tools">Parser</button>
                <button class="nav-link" data-section="docx-tools">DOCX</button>
                <button class="nav-link" data-section="image-tools">Image</button>
                <button class="nav-link" data-section="js-tools">JS Tools</button>
                <button class="nav-link" data-section="media-tools">Media</button>
            </nav>
            <div class="sidebar__footer">
                <a class="primary-btn" href="{{ docs_url }}" target="_blank" rel="noreferrer">Open API Docs</a>
                <p class="sidebar__hint">Swagger docs stay available at <code>{{ docs_url }}</code>.</p>
            </div>
        </aside>
        <main class="content">
            <section id="overview" class="panel">
                <header class="panel__header">
                    <h2>Welcome to your automation studio</h2>
                    <p>Trigger conversions, inspect jobs, and download assets without writing cURL commands.</p>
                </header>
                <div class="panel__body">
                    <div class="pill-group">
                        <span class="pill">FastAPI {{ version }}</span>
                        <span class="pill">Async ready</span>
                        <span class="pill">Queue aware</span>
                    </div>
                    <div class="grid two-column">
                        <div class="card">
                            <h3>Quick Start</h3>
                            <ol>
                                <li>Choose a tool from the sidebar.</li>
                                <li>Provide content or upload files.</li>
                                <li>Launch the request and download results instantly.</li>
                            </ol>
                            <p class="muted">Need deeper integration? Wire these endpoints straight into n8n, Zapier, or your agent stack.</p>
                        </div>
                        <div class="card">
                            <h3>Live Endpoint Catalogue</h3>
                            <div class="endpoint-search">
                                <label for="endpoint-filter">Search</label>
                                <input id="endpoint-filter" type="search" placeholder="Filter by name or tag" />
                            </div>
                            <div id="endpoint-list" class="endpoint-list" aria-live="polite">
                                <div class="muted">Loading endpoint catalogue‚Ä¶</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="parser-tools" class="panel">
                <header class="panel__header">
                    <h2>Parser</h2>
                    <p>Convert HTML or Markdown into structured Google Docs batchUpdate operations.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card">
                        <form id="html-parse-form" class="tool-form">
                            <div class="form-header">
                                <h3>HTML ‚Üí Requests</h3>
                                <p class="muted">Paste marketing-ready HTML and receive the corresponding Google Docs operations.</p>
                            </div>
                            <label for="html-input">HTML</label>
                            <textarea id="html-input" name="html" rows="8" placeholder="&lt;section&gt;...&lt;/section&gt;" required></textarea>
                            <button type="submit" class="primary-btn">Parse HTML</button>
                        </form>
                    </div>
                    <div class="card">
                        <form id="markdown-parse-form" class="tool-form">
                            <div class="form-header">
                                <h3>Markdown ‚Üí Requests</h3>
                                <p class="muted">Bring GitHub-flavoured Markdown and convert it to Docs-ready mutations.</p>
                            </div>
                            <label for="markdown-input">Markdown</label>
                            <textarea id="markdown-input" name="markdown" rows="8" placeholder="# Release notes" required></textarea>
                            <button type="submit" class="primary-btn">Parse Markdown</button>
                        </form>
                    </div>
                    <div class="card span-two">
                        <form id="docs-html-form" class="tool-form">
                            <div class="form-header">
                                <h3>Instant Docs Request Builder</h3>
                                <p class="muted">Generate Google Docs batchUpdate payloads from HTML without queueing a job.</p>
                            </div>
                            <label for="docs-html-input">HTML</label>
                            <textarea id="docs-html-input" name="html" rows="6" placeholder="&lt;h1&gt;Launch Deck&lt;/h1&gt;" required></textarea>
                            <button type="submit" class="primary-btn">Build Docs Requests</button>
                        </form>
                    </div>
                    <div class="card span-two">
                        <form id="docs-markdown-form" class="tool-form">
                            <div class="form-header">
                                <h3>Markdown Docs Builder</h3>
                                <p class="muted">Skip the queue and transform Markdown to Docs mutations immediately.</p>
                            </div>
                            <label for="docs-markdown-input">Markdown</label>
                            <textarea id="docs-markdown-input" name="markdown" rows="6" placeholder="## Agenda" required></textarea>
                            <button type="submit" class="primary-btn">Build Docs Requests</button>
                        </form>
                    </div>
                    <div id="parser-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>

            <section id="docx-tools" class="panel">
                <header class="panel__header">
                    <h2>DOCX Toolkit</h2>
                    <p>Upload Word documents and extract plain text instantly.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card">
                        <form id="docx-parse-form" class="tool-form">
                            <div class="form-header">
                                <h3>Parse DOCX</h3>
                                <p class="muted">Drop a .docx file to stream back the cleaned text.</p>
                            </div>
                            <label for="docx-file">DOCX file</label>
                            <input id="docx-file" type="file" accept=".docx" required />
                            <button type="submit" class="primary-btn">Extract Text</button>
                        </form>
                    </div>
                    <div id="docx-results" class="result-panel" aria-live="polite"></div>
                </div>
            </section>

            <section id="image-tools" class="panel">
                <header class="panel__header">
                    <h2>Image Studio</h2>
                    <p>Apply glow effects or create before/after promos without leaving the browser.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card">
                        <form id="halations-form" class="tool-form">
                            <div class="form-header">
                                <h3>Halations Glow</h3>
                                <p class="muted">Upload an image and tune the glow with live sliders.</p>
                            </div>
                            <label for="halations-image">Image</label>
                            <input id="halations-image" type="file" accept="image/*" required />
                            <div class="slider-group">
                                <label>Blur amount <span id="blur-value">10</span></label>
                                <input id="blur-slider" type="range" min="0" max="50" step="1" value="10" />
                            </div>
                            <div class="slider-group">
                                <label>Brightness threshold <span id="brightness-value">200</span></label>
                                <input id="brightness-slider" type="range" min="0" max="255" step="5" value="200" />
                            </div>
                            <div class="slider-group">
                                <label>Strength <span id="strength-value">50</span></label>
                                <input id="strength-slider" type="range" min="0" max="150" step="1" value="50" />
                            </div>
                            <button type="submit" class="primary-btn">Apply Glow</button>
                        </form>
                    </div>
                    <div class="card">
                        <form id="before-after-form" class="tool-form">
                            <div class="form-header">
                                <h3>Before/After Swipe</h3>
                                <p class="muted">Blend two visuals into a motion clip with optional captions.</p>
                            </div>
                            <label for="before-image">Before image</label>
                            <input id="before-image" type="file" accept="image/*" required />
                            <label for="after-image">After image</label>
                            <input id="after-image" type="file" accept="image/*" required />
                            <div class="form-row">
                                <label for="before-after-duration">Duration (seconds)</label>
                                <input id="before-after-duration" type="number" min="1" max="20" step="0.5" value="6" />
                                <label for="before-after-fps">FPS</label>
                                <input id="before-after-fps" type="number" min="1" max="60" step="1" value="30" />
                            </div>
                            <div class="form-row">
                                <label for="before-after-cycles">Cycles</label>
                                <input id="before-after-cycles" type="number" min="1" max="10" step="1" value="2" />
                                <label for="before-after-line">Line thickness</label>
                                <input id="before-after-line" type="number" min="1" max="20" step="1" value="6" />
                            </div>
                            <label class="checkbox">
                                <input id="before-after-text-toggle" type="checkbox" />
                                <span>Add overlay text</span>
                            </label>
                            <textarea id="before-after-text" rows="2" placeholder="Save 35% this quarter" style="display: none;"></textarea>
                            <button type="submit" class="primary-btn">Generate Clip</button>
                        </form>
                    </div>
                    <div id="image-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>

            <section id="js-tools" class="panel">
                <header class="panel__header">
                    <h2>JavaScript Tools</h2>
                    <p>Bridge Node-powered utilities like the panorama splitter straight from the browser.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card span-two">
                        <form id="panosplitter-form" class="tool-form">
                            <div class="form-header">
                                <h3>Panosplitter</h3>
                                <p class="muted">Upload a panorama and get Instagram-ready slices plus a downloadable zip.</p>
                            </div>
                            <label for="panosplitter-image">Panorama image</label>
                            <input id="panosplitter-image" type="file" accept="image/*" required />
                            <label class="checkbox">
                                <input id="panosplitter-highres" type="checkbox" />
                                <span>Enable high resolution mode</span>
                            </label>
                            <button type="submit" class="primary-btn">Split Panorama</button>
                        </form>
                    </div>
                    <div class="card span-two">
                        <form id="cobalt-form" class="tool-form">
                            <div class="form-header">
                                <h3>Cobalt Downloader</h3>
                                <p class="muted">Proxy downloads through your configured Cobalt instance without leaving the browser.</p>
                            </div>
                            <label for="cobalt-url">URL</label>
                            <input id="cobalt-url" type="url" required placeholder="https://www.youtube.com/watch?v=..." />
                            <label class="checkbox">
                                <input id="cobalt-binary" type="checkbox" />
                                <span>Return binary download</span>
                            </label>
                            <label for="cobalt-filename">Filename override (binary only)</label>
                            <input id="cobalt-filename" type="text" placeholder="custom.mp4" />
                            <label for="cobalt-payload">Raw JSON payload (optional)</label>
                            <textarea id="cobalt-payload" rows="5" placeholder='{"audioFormat": "mp3", "videoQuality": "1080"}'></textarea>
                            <button type="submit" class="primary-btn">Send to Cobalt</button>
                        </form>
                    </div>
                    <div id="js-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>

            <section id="media-tools" class="panel">
                <header class="panel__header">
                    <h2>Media Toolkit</h2>
                    <p>Inspect or download media via yt-dlp without touching the command line.</p>
                </header>
                <div class="panel__body grid two-column">
                    <div class="card span-two">
                        <form id="yt-dlp-form" class="tool-form">
                            <div class="form-header">
                                <h3>yt-dlp Inspector</h3>
                                <p class="muted">Preview the media details, then pick a ready-made download recipe.</p>
                            </div>
                            <label for="yt-dlp-url">URL</label>
                            <input id="yt-dlp-url" type="url" required placeholder="https://www.youtube.com/watch?v=..." />

                            <label for="yt-dlp-template">Quick recipe</label>
                            <select id="yt-dlp-template">
                                <option value="best">Best quality video</option>
                                <option value="hd1080">HD 1080p (if available)</option>
                                <option value="audio">Audio only</option>
                                <option value="subtitles">Grab subtitles</option>
                                <option value="custom">Custom setup</option>
                            </select>
                            <p id="yt-dlp-template-hint" class="helper-text"></p>

                            <div class="form-actions">
                                <button type="submit" class="primary-btn">Preview media info</button>
                                <button type="button" id="yt-dlp-open-modal" class="secondary-btn" disabled>
                                    Choose download quality
                                </button>
                            </div>

                            <details class="advanced-options">
                                <summary>Advanced options</summary>
                                <div class="advanced-grid">
                                    <div>
                                        <label for="yt-dlp-format">Format selector</label>
                                        <input
                                            id="yt-dlp-format"
                                            type="text"
                                            placeholder="bestvideo+bestaudio/best"
                                        />
                                    </div>
                                    <div>
                                        <label for="yt-dlp-playlist-items">Playlist items (e.g. 1-3,5)</label>
                                        <input id="yt-dlp-playlist-items" type="text" placeholder="1-3,5" />
                                    </div>
                                    <div>
                                        <label for="yt-dlp-filename">Filename override</label>
                                        <input id="yt-dlp-filename" type="text" placeholder="custom.mp4" />
                                    </div>
                                    <div>
                                        <label for="yt-dlp-headers">HTTP headers (JSON object)</label>
                                        <textarea
                                            id="yt-dlp-headers"
                                            rows="3"
                                            placeholder='{"Cookie": "session=..."}'
                                        ></textarea>
                                    </div>
                                    <div>
                                        <label for="yt-dlp-proxy">Proxy URL</label>
                                        <input id="yt-dlp-proxy" type="text" placeholder="socks5://localhost:9050" />
                                    </div>
                                    <div class="form-row">
                                        <label class="checkbox">
                                            <input id="yt-dlp-write-subtitles" type="checkbox" />
                                            <span>Write subtitles to disk</span>
                                        </label>
                                        <label class="checkbox">
                                            <input id="yt-dlp-write-auto-sub" type="checkbox" />
                                            <span>Write automatic subs</span>
                                        </label>
                                    </div>
                                    <div>
                                        <label for="yt-dlp-subtitle-langs">Subtitle languages (comma separated)</label>
                                        <input id="yt-dlp-subtitle-langs" type="text" placeholder="en,es" />
                                    </div>
                                </div>
                            </details>
                        </form>
                    </div>
                    <div id="media-results" class="result-panel span-two" aria-live="polite"></div>
                </div>
            </section>
        </main>
    </div>
    <div id="yt-dlp-modal" class="modal" hidden>
        <div class="modal__backdrop" data-modal-dismiss></div>
        <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="yt-dlp-modal-title">
            <header class="modal__header">
                <div>
                    <h3 id="yt-dlp-modal-title">Choose a download quality</h3>
                    <p id="yt-dlp-modal-subtitle" class="muted"></p>
                </div>
                <button type="button" class="icon-btn" id="yt-dlp-modal-close" aria-label="Close">
                    √ó
                </button>
            </header>
            <div class="modal__body">
                <p class="helper-text">
                    Select the format that best matches what you need. We organise the list from the highest video quality to
                    simple audio tracks.
                </p>
                <div id="yt-dlp-quality-list" class="quality-list" role="radiogroup" aria-label="Download options"></div>
            </div>
            <footer class="modal__footer">
                <button type="button" class="secondary-btn" data-modal-dismiss>Cancel</button>
                <button type="button" class="primary-btn" id="yt-dlp-modal-download" disabled>
                    Download selection
                </button>
            </footer>
        </div>
    </div>
    <div id="toast" class="toast" role="status" aria-live="polite" hidden></div>
    <script>
        window.__STUDIO_CONFIG__ = {
            openapiUrl: "{{ openapi_url }}"
        };
    </script>
    <script src="/static/js/studio.js" type="module"></script>
</body>
</html>
